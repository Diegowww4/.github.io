<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎉 恭喜您被選中！ - 網路安全教育演練</title>
    <!-- 樣式略，保持原樣 -->
    <style>
      /* ...原有 CSS 程式碼不變... */
    </style>
</head>
<body>
    <div class="education-banner">
        ⚠️ 這是網路安全教育模擬演練網站 - 請勿輸入真實個人資料 ⚠️
    </div>

    <div class="container">
        <!-- 首頁與跑馬燈部分保留原樣 -->

        <!-- 表單頁面 -->
        <div id="formPage" class="form-container">
            <h2 style="text-align: center; color: #ff6b35; margin-bottom: 30px;">填寫資料完成抽獎</h2>
            <form onsubmit="submitForm(event)">
                <div class="form-group">
                    <label for="name">姓名：</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="phone">手機號碼：</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="email">電子郵件：</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="idcard">身分證字號：</label>
                    <input type="text" id="idcard" name="idcard" required>
                </div>
                <button type="submit" class="submit-btn">確認送出</button>
            </form>
        </div>

        <!-- 警告頁面 -->
        <div id="warningPage" class="warning-page">
            <div class="warning-icon">⚠️</div>
            <h2 class="warning-title">停！這是詐騙陷阱！</h2>
            <div class="warning-text">
                <p><strong>您剛才差點成為網路詐騙的受害者！</strong></p>
                <p><strong>常見詐騙手法特徵：</strong></p>
                <p>• 聲稱您「被選中」或「中獎」</p>
                <p>• 要求填寫個人敏感資料</p>
                <p>• 製造緊迫感（限時優惠）</p>
                <p>• 承諾不切實際的獎品</p>
                <p><strong>記住：</strong>合法的抽獎活動不會要求您提供身分證字號或銀行帳戶資訊！</p>
            </div>
            <button class="back-button" onclick="goHome()">返回首頁</button>
        </div>
    </div>

    <script>
        const scriptUrl = 'https://script.google.com/macros/s/AKfycbyzQvZYUjfXpIOunFdlR4YZoo5eMWG0iV7mZKb00Eg_OxqTGeTdIssJpHx-GuKxcEE0vw/exec';

        let clickCount = 0;
        let participants = [];

        function startTimer() {
            let timeLeft = 300;
            const timer = setInterval(() => {
                const m = Math.floor(timeLeft / 60);
                const s = (timeLeft % 60).toString().padStart(2, '0');
                document.getElementById('timer').textContent = `${m}:${s}`;
                if (--timeLeft < 0) clearInterval(timer);
            }, 1000);
        }

        function clickLucky() {
            clickCount++;
            document.getElementById('clickCount').textContent = clickCount;
            document.getElementById('homepage').style.display = 'none';
            document.getElementById('formPage').style.display = 'block';
        }

        async function submitForm(event) {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const idcard = document.getElementById('idcard').value;
            participants.push({ name, phone, email, idcard });

            const submitBtn = document.querySelector('.submit-btn');
            submitBtn.textContent = '資料提交中...';
            submitBtn.disabled = true;

            try {
                const params = new URLSearchParams({ name, phone, email, idcard });
                const response = await fetch(`${scriptUrl}?${params}`, { method: 'GET', mode: 'cors' });
                const result = await response.text();
                console.log('✅ Google Apps Script 回應:', result);
                alert("✅ 已成功儲存！這是模擬演練，請勿輸入真實資料！");
            } catch (err) {
                console.error('❌ 資料送出失敗:', err);
                alert("❌ 提交失敗，請稍後再試！");
            }

            submitBtn.textContent = '確認送出';
            submitBtn.disabled = false;
            updateMarquee();
            document.getElementById('formPage').style.display = 'none';
            document.getElementById('warningPage').style.display = 'block';
        }

        function updateMarquee() {
            const marquee = document.getElementById('marqueeText');
            if (participants.length > 0) {
                const names = participants.map(p => p.name).join('、');
                marquee.textContent = `🎉 ${names} 等 ${participants.length} 位朋友參與了演練！提醒：真正的抽獎不會索取個人敏感資料！`;
            }
        }

        function goHome() {
            document.getElementById('warningPage').style.display = 'none';
            document.getElementById('homepage').style.display = 'block';
            document.getElementById('name').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('email').value = '';
            document.getElementById('idcard').value = '';
        }

        window.onload = function () {
            startTimer();
        }
    </script>
</body>
</html>
